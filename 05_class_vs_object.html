<html>
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
        <link rel="stylesheet" href="main.css">
    </head>
    <body>
        
        <script>
            // 'use strict'; 선언을 하면 아래와 같은 선언되지 않은 코드들은 에러를 발생시킨다.
            // 오류를 줄이기 위해 스크립트의 처음에 선언해 주는것이 좋다.
            'use strict';
            
            // Object-oriented programming
            // class : template
            // object: instance of a class
            // JavaScript classes
            // - introduced in ES6
            // - syntactical sugar over prototype-based inheritance
            
            
            // 1.Class declarations
            class Person{
                //constructor
                constructor(name,age){
                    //fields
                    this.name = name;
                    this.age = age;
                }
                
                //methods
                speak(){
                    console.log(this.name+' hello!');
                }
            }
            
            const ellie = new Person('ellie',26);
            console.log(ellie.name);
            console.log(ellie.age);
            ellie.speak();
            
            // 2. Getter Setters
            class User{
                constructor(firstName,lastName,age){
                    this.firstName = firstName;
                    this.lastName = lastName;
                    this.age = age;
                }
                
                get age(){
                    //return this.age; //Maximum call stack size exceeded 발생 아래와같이 변경
                    return this._age;
                }
                
                set age(value){
                    //this.age = value; //Maximum call stack size exceeded 발생 아래와같이 변경
                    this._age = value < 0 ? 0 : value;
                }
            }
            
            const user1 = new User('Steve','Job',-1);
            console.log(user1.age);
            
            // 3. Fields (public, private)
            // Too soon!
            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Referance
            class Experiment{
                publicField = 2;
                #privateField = 0;
            }
            
            const experiment = new Experiment();
            console.log(experiment.publicField);
            console.log(experiment.privateField); //class 외부에서 인식할 수 없다.
            
            // 4. Static properties and methods
            // Too soon!
            class Article{
                
                static publisher = 'Dream Coding';
                
                constructor(articleNumber){
                    this.articleNumber = articleNumber;
                }
            
                static printPublish(){
                    console.log(Article.publisher);
                }
            }
            const article1 = new Article(1);
            const article2 = new Article(2);
            // object에 할당된것이 아니라 class자체에 할당된 값으로 undefined
            console.log(article1.publisher); 
            // class 이름을 이용해서 접근함.
            console.log(Article.publisher);
            // class 이름을 이용해서 메서드사용.
            Article.printPublish();
            
            
            // 5. Inheritance 상속
            // a way for on class to extend another class.
            class Shape{
                constructor(width,height,color){
                    this.width = width;
                    this.height = height;
                    this.color = color;
                }
                
                draw(){
                    console.log('drawing '+this.color+' color !!');
                }
                
                getArea(){
                    return this.width * this.height;
                }
            }
            
            class Rectangle extends Shape {}
            class Triangle extends Shape {
                draw(){
                    //부모의 draw사용
                    super.draw();
                    console.log('$$');
                }
                //오버라이딩
                getArea(){
                    return (this.width * this.height) / 2;
                }
            }
            
            const rectangle = new Rectangle(20,20,'blue');
            rectangle.draw();
            console.log(rectangle.getArea());
            const triangle = new Triangle(20,20,'red');
            triangle.draw();
            console.log(triangle.getArea());
            
            // 6. Class checking: instanceOf
            // 왼쪽의 object가 오른쪽의 class를 사용하여 만든 instance인지 확인 true/false
            console.log(rectangle instanceof Rectangle); // true
            console.log(triangle instanceof Rectangle);  // false
            console.log(triangle instanceof Triangle);   // true
            console.log(triangle instanceof Shape);      // true
            console.log(triangle instanceof Object);     // true
            
            // 자바스크립트 object들
            // JavaScript reference 페이지를 참고하세요.
            
            
        </script>
    </body>
</html>